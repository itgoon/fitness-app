import{N as r,O as E,v as A,w as B,x as U,y as F,r as s,b as H,z as V,j as n,T as _,a8 as W,I as C,c as w,p as z,a9 as X,E as $}from"./index-DCohMUSq.js";import{u as O,T as G,a as K}from"./TableNoData-l5xlDQj0.js";import{T as Q}from"./TablePaginationCustom-lHqvqPlH.js";import{c as Z}from"./common-C3tr0nDT.js";import{u as q}from"./useDebounce-C458BMjt.js";import{C as J}from"./Container-CRU1XRhF.js";import{C as ee}from"./Card-tftieEkb.js";import{D as te}from"./DateCalendar-jqdGjjPW.js";import{T as ne,a as le,b as ie,c as re}from"./TableRow-CAGk89EI.js";import{T as se}from"./TableBody-CL5-UDjZ.js";import"./TableHead-C-sdwq_b.js";import"./Checkbox-uwB3fCxe.js";import"./SwitchBase-lNz_gExs.js";import"./useFormControl-Bc42zwoH.js";import"./KeyboardArrowRight-BLOc5KWk.js";import"./Select-DHHIZaYz.js";const ae={count:125,infos:[{playerID:20104,clubID:41,deviceID:546079440,deviceName:"리온짐 정문",name:"이노아",sex:1,birth:19880419,phone:"010-7529-0419",attendTime:1692494663},{playerID:20126,clubID:41,deviceID:546079440,deviceName:"리온짐 정문",name:"박미성",sex:2,birth:19810629,phone:"010-8884-1588",attendTime:1692483110},{playerID:20126,clubID:41,deviceID:546079440,deviceName:"리온짐 정문",name:"박미성",sex:2,birth:19810629,phone:"010-8884-1588",attendTime:1692483111},{playerID:20241,clubID:41,deviceID:546079440,deviceName:"리온짐 정문",name:"김우빈",sex:1,birth:19990228,phone:"010-4484-3439",attendTime:1713537694},{playerID:22997,clubID:41,deviceID:546079440,deviceName:"리온짐 정문",name:"배상용",sex:1,birth:19770201,phone:"010-6298-4848",attendTime:1694221237},{playerID:24566,clubID:41,deviceID:546079440,deviceName:"리온짐 정문",name:"우제환",sex:1,birth:19580630,phone:"010-5388-4444",attendTime:1703731028},{playerID:24566,clubID:41,deviceID:546079440,deviceName:"리온짐 정문",name:"우제환",sex:1,birth:19580630,phone:"010-5388-4444",attendTime:1704250260},{playerID:24566,clubID:41,deviceID:546079440,deviceName:"리온짐 정문",name:"우제환",sex:1,birth:19580630,phone:"010-5388-4444",attendTime:1704419453},{playerID:24566,clubID:41,deviceID:546079440,deviceName:"리온짐 정문",name:"우제환",sex:1,birth:19580630,phone:"010-5388-4444",attendTime:1704678751},{playerID:27927,clubID:41,deviceID:546079440,deviceName:"리온짐 정문",name:"박영현",sex:1,birth:19920321,phone:"010-2326-4838",attendTime:1690796754}],membershipInfos:[{playerID:19954,account:"khjj0901@naver.com",name:"김대연",phone:"010-6455-9775",birth:19940901,sex:1,profileURL:"https://k.kakaocdn.net/dn/Xvxyh/btrc9e7Cgrx/ibGoRULQYXOQrzHXy9vaRK/img_640x640.jpg",memberType:6,registTime:1635552067,clubProfileURL:null,clubSimpleList:null,height:null,interviewLevel:null,interviewPurpose:null,interviewWhere:null,latelyCourse:null,membershipList:null,pointH:null,tutorialFlag:null,weight:null},{playerID:20241,account:"kwb119@nate.com",name:"김우빈",phone:"010-4484-3439",birth:19990228,sex:1,profileURL:"20241_1692275342.jpg",memberType:6,registTime:1635918444,clubProfileURL:null,clubSimpleList:null,height:null,interviewLevel:null,interviewPurpose:null,interviewWhere:null,latelyCourse:null,membershipList:null,pointH:null,tutorialFlag:null,weight:null},{playerID:27927,account:"dudgufnl@naver.com",name:"박영현",phone:"010-2326-4838",birth:19920321,sex:1,profileURL:"https://k.kakaocdn.net/dn/MHFn5/btsjk5hPixj/XNxgCmpGdW8FvZItnCbyP1/img_640x640.jpg",memberType:6,registTime:1663811600,clubProfileURL:null,clubSimpleList:null,height:null,interviewLevel:null,interviewPurpose:null,interviewWhere:null,latelyCourse:null,membershipList:null,pointH:null,tutorialFlag:null,weight:null},{playerID:35443,account:"testreongym100@ohtree.net",name:"헬스네비테스트",phone:"010-0000-0000",birth:19800101,sex:1,profileURL:"",memberType:6,registTime:1689141200,clubProfileURL:null,clubSimpleList:null,height:null,interviewLevel:null,interviewPurpose:null,interviewWhere:null,latelyCourse:null,membershipList:null,pointH:null,tutorialFlag:null,weight:null}],result:1},oe=(l,a=44350)=>{let o=l.filter(t=>t.playerID===a);return o=E.sortBy(o,["state"]),o.length>0?o[0]:void 0},ue=async l=>{const a=await{...ae};return l.searchText&&l.searchText.length>0&&(a.infos=a.infos.filter(o=>o.name.includes(l.searchText)||o.phone.includes(l.searchText))),a.infos=a.infos.filter(o=>{const t=oe(a.membershipInfos,o.playerID);return l.type==="ALL"?!0:t?l.type==="ACTIVE"?!!r().isBetween(r(1e3*t.startTime).format("YYYY-MM-DD"),r(1e3*t.endTime).format("YYYY-MM-DD")):l.type==="INACTIVE"?!r().isBetween(r(1e3*t.startTime).format("YYYY-MM-DD"),r(1e3*t.endTime).format("YYYY-MM-DD")):l.type==="PAUSE"?!r().isBetween(r(1e3*t.startTime).format("YYYY-MM-DD"),r(1e3*t.endTime).format("YYYY-MM-DD")):!0:!1}),a.count=a.infos.length,Promise.resolve(a)},c="YYYY.M.D";function je(){const{t:l}=A();B();const a=U(),o=F(),t=O({defaultOrderBy:"createDate",defaultRowsPerPage:10}),[x,P]=s.useState([]),[ce,Y]=s.useState([]),[h,j]=s.useState(0),[L,S]=s.useState(!1);H();const[m,M]=s.useState({type:"ALL",searchText:""}),[me,R]=s.useState(0),N=q(m.searchText?m.searchText:"",200);s.useState(!1);const[d,f]=s.useState(r().format(c)),[D,g]=s.useState(null),b=!!D,v=e=>h-e-t.page*t.rowsPerPage,T=s.useMemo(()=>[{id:"attendTime",label:l("시간"),width:230,align:"center",Cell:e=>r(1e3*e.attendTime).format("YYYY.MM.DD HH:MM")},{id:"deviceName",label:l("출입문"),width:100,align:"center"},{id:"name",label:l("이름"),width:100,align:"center"},{id:"birth",label:l("나이"),width:100,align:"center",Cell:e=>Z(e.birth.toString())},{id:"sex",label:l("성별"),width:100,align:"center",Cell:e=>e.sex===1?"남자":"여자"},{id:"phone",label:l("연락처"),width:150,align:"center"}],[h,t]);s.useEffect(()=>{I()},[t.page,t.rowsPerPage]),s.useEffect(()=>{t.onResetPage(),I()},[m.type,N]);const I=async()=>{const e=await ue(m);console.log("res : ",e),P(e.infos),Y(e.membershipInfos),j(e.count),setTimeout(()=>{S(!0)},300)};return s.useCallback(e=>{o.push(V.user.details(e))},[o]),s.useCallback((e,u)=>{R(u);let i="ALL";u===1?i="ACTIVE":u===2?i="PAUSE":u===3&&(i="INACTIVE"),M({...m,type:i})},[]),n.jsx(n.Fragment,{children:n.jsxs(J,{maxWidth:a.themeStretch?!1:"lg",children:[n.jsx(_,{variant:"h4",sx:{marginBottom:4},children:"출입기록"}),n.jsx(W,{children:n.jsxs(ee,{sx:{textAlign:"center"},children:[n.jsx(C,{color:"primary",onClick:()=>f(r(d,c).add(-1,"d").format(c)),children:n.jsx(w,{icon:"mingcute:left-line"})}),n.jsx(z,{sx:{fontSize:"1.125rem",padding:2.5},"aria-describedby":b?"simple-popover":void 0,onClick:e=>g(e.currentTarget),children:d}),n.jsx(C,{color:"primary",onClick:()=>f(r(d,c).add(1,"d").format(c)),children:n.jsx(w,{icon:"mingcute:right-line"})}),n.jsx(X,{id:b?"simple-popover":void 0,open:b,onClose:()=>g(null),anchorEl:D,children:n.jsx(te,{value:new Date(d),onChange:e=>{f(r(e).format(c)),console.log({e},r(e).format(c)),g(null)}})}),n.jsx(ne,{sx:{position:"relative",overflow:"unset"},children:n.jsx($,{children:n.jsxs(le,{size:t.dense?"small":"medium",sx:{},children:[n.jsx(G,{headLabel:T,rowCount:h,numSelected:t.selected.length}),n.jsxs(se,{children:[x.map((e,u)=>n.jsx(ie,{hover:!0,selected:t.selected.includes(String(e.id)),style:{cursor:"pointer"},children:T.filter(i=>!(i.id===""&&!i.Cell)).map((i,k)=>{let y=e[i.id]?e[i.id]:"";i.Cell&&(y=i.Cell(e));let p="center";return i.align?i.align==="left"?p="left":i.align==="right"&&(p="right"):p="center",n.jsx(re,{align:p,children:y},`col_${v(u)}_${k}`)})},`row_${v(u)}`)),L&&n.jsx(K,{notFound:x.length===0})]})]})})}),n.jsx(Q,{count:h,page:t.page,rowsPerPage:t.rowsPerPage,onPageChange:t.onChangePage,onRowsPerPageChange:t.onChangeRowsPerPage,dense:t.dense,onChangeDense:t.onChangeDense})]})})]})})}export{je as default};
