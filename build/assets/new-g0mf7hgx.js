import{x as U,v as V,y as z,C as $,D as q,r as L,b as c,j as e,z as v,E as P,B as o,S as H,c as C,p as K}from"./index-DCohMUSq.js";import{c as _,a as h,o as A}from"./index.esm-B_BCm8yh.js";import{u as J,F as N,R as l}from"./RhfTextField-CQjN9Et2.js";import{u as O}from"./useModal-DQiQv9xr.js";import{i as f}from"./common-C3tr0nDT.js";import{i as Q,l as X}from"./membershipService-BT5UrQCW.js";import{C as Y}from"./CustomBreadcrumbs-Ynp4_ePu.js";import"./upgradeStorageIllustration-BigDtFz4.js";import{R as Z}from"./RhfRadioGroup-ERy729gC.js";import{C as ee}from"./Container-CRU1XRhF.js";import{C as re}from"./Card-tftieEkb.js";import{T as se,a as te,b as a,c as s}from"./TableRow-CAGk89EI.js";import{L as I}from"./LoadingButton-Dc47B8_Y.js";import"./TextField-D_JdeLxl.js";import"./Select-DHHIZaYz.js";import"./useFormControl-Bc42zwoH.js";import"./FormControlLabel-CtTwhY4e.js";import"./SwitchBase-lNz_gExs.js";function Ie(){const k=U(),{t:r}=V(),j=z(),{openModal:S,openAlert:G}=O(),[T,ae]=$(q.Layout.modalState),[D,oe]=L.useState(),n=c(!1),i=c(!0),F=_().shape({userId:h().email(r("아이디를 입력해주세요.")).test("dup",r("중복체크를 진행해주세요."),async()=>i.value).test("checkDup",r("이미 사용중인 아이디 입니다."),async()=>n.value).required(r("아이디를 입력해주세요.")),nmame:h().required(r("이름을 입력해주세요.")),password:h().required(r("패스워드를 입력해주세요."))}),y=J({mode:"all",resolver:A(F),defaultValues:D}),u=c(),p=c(),{handleSubmit:W,formState:{isSubmitting:R,errors:d},watch:m,setValue:w}=y,b=W(async t=>{S({type:"reason",data:{title:r("ui.member.create.reason"),onClickSuccess:async x=>{u.onTrue();const g=await Q({...t,memo:x});if(g.meta.errCode!==0)return alert(r("exception.unknown.server.error"));G({title:r("msg.common.save.ok"),onClose:()=>{j.push(`/user/${g.data.id}`),u.onFalse()}})}}})}),E=async()=>{p.onTrue();const{meta:t,data:x}=await X(m("userId"));x?(i.onFalse(),n.onFalse()):(n.onTrue(),i.onTrue()),setTimeout(()=>{p.onFalse(),w("userId",m("userId"),{shouldValidate:!0})},300)},M=()=>!(!d.userId||f(d.userId)||d.userId.type==="checkDup"||d.userId.type==="dup"),B=t=>{if(t.key==="Enter"&&!t.shiftKey)return T.open?void 0:(t.preventDefault(),b(t))};return e.jsx(N,{methods:y,onKeyUp:B,children:e.jsxs(ee,{maxWidth:k.themeStretch?!1:"lg",children:[e.jsx(Y,{heading:r("회원등록"),links:[{name:r("회원관리")},{name:r("회원목록"),href:v.user.root},{name:r("회원등록"),href:v.user.new}],sx:{mb:{xs:3,md:5}}}),e.jsx(re,{children:e.jsx(se,{sx:{overflow:"unset",p:2},children:e.jsx(P,{children:e.jsxs(te,{sx:{minWidth:700},children:[e.jsxs(a,{children:[e.jsx(s,{width:100,children:r("아이디")}),e.jsx(s,{sx:{typography:"subtitle2"},children:e.jsxs(o,{display:"flex",flexDirection:"row",rowGap:"8px",columnGap:2,children:[e.jsx(l,{name:"userId",placeholder:r("아이디를 입력해주세요."),onChange:t=>{n.value&&n.onFalse(),i.value||i.onTrue(),w("userId",t.target.value,{shouldValidate:!0})}}),e.jsx(I,{size:"large",variant:"contained",color:"primary",style:{minWidth:100},loading:p.value,disabled:f(m("userId"))?!0:n.value||M(),onClick:E,children:r("중복체크")})]})})]}),e.jsxs(a,{children:[e.jsx(s,{width:90,children:r("패스워드")}),e.jsx(s,{sx:{typography:"subtitle2"},children:e.jsx(l,{name:"password",type:"password",placeholder:r("비밀번호를 입력해주세요. 6~15자"),inputProps:{autocomplete:"new-password",form:{autocomplete:"off"}}})})]}),e.jsxs(a,{children:[e.jsx(s,{width:70,children:r("이름")}),e.jsx(s,{sx:{typography:"subtitle2"},children:e.jsx(o,{display:"flex",flexDirection:"row",rowGap:"8px",columnGap:2,children:e.jsx(l,{name:"name",placeholder:r("이름을 입력해주세요."),fullWidth:!0})})})]}),e.jsxs(a,{children:[e.jsx(s,{width:70,children:r("생년월일")}),e.jsx(s,{sx:{typography:"subtitle2"},children:e.jsx(o,{display:"flex",flexDirection:"row",rowGap:"8px",columnGap:2,children:e.jsx(l,{name:"name",placeholder:r("1992-01-01 (숫자만 입력)"),fullWidth:!0})})})]}),e.jsxs(a,{children:[e.jsx(s,{width:70,children:r("휴대폰번호")}),e.jsx(s,{sx:{typography:"subtitle2"},children:e.jsx(o,{display:"flex",flexDirection:"row",rowGap:"8px",columnGap:2,children:e.jsx(l,{name:"name",placeholder:r("010-0000-0000 (숫자만 입력)"),fullWidth:!0})})})]}),e.jsxs(a,{children:[e.jsx(s,{width:70,children:r("키(cm)")}),e.jsx(s,{sx:{typography:"subtitle2"},children:e.jsx(o,{display:"flex",flexDirection:"row",rowGap:"8px",columnGap:2,children:e.jsx(l,{name:"name",type:"number",placeholder:r("키를 입력해주세요."),fullWidth:!0})})})]}),e.jsxs(a,{children:[e.jsx(s,{width:70,children:r("몸무게(kg)")}),e.jsx(s,{sx:{typography:"subtitle2"},children:e.jsx(o,{display:"flex",flexDirection:"row",rowGap:"8px",columnGap:2,children:e.jsx(l,{name:"name",type:"number",placeholder:r("몸무게를 입력해주세요."),fullWidth:!0})})})]}),e.jsxs(a,{children:[e.jsx(s,{width:70,children:r("성별")}),e.jsx(s,{sx:{typography:"subtitle2"},children:e.jsx(o,{display:"flex",flexDirection:"row",rowGap:"8px",columnGap:2,children:e.jsx(Z,{row:!0,spacing:4,name:"name",defaultValue:"남",options:[{value:"남",label:"남"},{value:"여",label:"여"}]})})})]})]})})})}),e.jsxs(H,{justifyContent:"flex-end",direction:"row",spacing:2,sx:{mt:3},children:[e.jsx(I,{size:"large",variant:"contained",color:"primary",style:{minWidth:100},loading:u.value&&R,disabled:!f(d),onClick:b,startIcon:e.jsx(C,{icon:"ic:round-table-view"}),children:r("저장")}),e.jsx(K,{size:"large",variant:"contained",color:"error",style:{minWidth:100},onClick:()=>j.back(),startIcon:e.jsx(C,{icon:"ic:round-table-view"}),children:r("취소")})]})]})})}export{Ie as default};
