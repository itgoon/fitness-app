import{v as E,u as P,w as A,x as R,y as k,r as a,b as w,j as s,p as l,z as c,A as L,c as h,T as M,S as $}from"./index-DCohMUSq.js";import{l as B}from"./userService-n3-7vaqn.js";import{u as U}from"./useDebounce-C458BMjt.js";import{C as V}from"./CustomBreadcrumbs-Ynp4_ePu.js";import{u as D}from"./TableNoData-l5xlDQj0.js";import{T as F}from"./Table-8g-U-SBX.js";import{u as N}from"./useModal-DQiQv9xr.js";import{C as W}from"./Container-CRU1XRhF.js";import{C as z}from"./Card-tftieEkb.js";import{T as O}from"./TextField-D_JdeLxl.js";import{I as q}from"./InputAdornment-DTQ32jp8.js";import"./TableHead-C-sdwq_b.js";import"./TableRow-CAGk89EI.js";import"./Checkbox-uwB3fCxe.js";import"./SwitchBase-lNz_gExs.js";import"./useFormControl-Bc42zwoH.js";import"./TablePaginationCustom-lHqvqPlH.js";import"./KeyboardArrowRight-BLOc5KWk.js";import"./Select-DHHIZaYz.js";import"./TableFiltersResult-BtUwgqsU.js";import"./TableBody-CL5-UDjZ.js";function fe(){const{t:e}=E(),x=P();A();const{openModal:G,openAlert:H,openConfirm:f}=N(),g=R(),m=k(),i=D({defaultOrderBy:"createDate",defaultRowsPerPage:10}),[b,C]=a.useState([]),[J,T]=a.useState([]),[p,j]=a.useState(0);a.useState(!1),w();const[n,u]=a.useState({type:"ALL",searchText:""});e("전체"),e("유효"),e("만료");const[K,S]=a.useState(0),v=U(n.searchText?n.searchText:"",200),y=a.useMemo(()=>[{id:"name",label:e("이름"),width:100,align:"center"},{id:"email",label:e("이메일"),align:"center"},{id:"phone",label:e("연락처"),align:"center"},{id:"store",label:e("대표지점"),align:"center"},{label:e("지점"),align:"center",width:"100px",Cell:t=>s.jsx(l,{color:"info",variant:"contained",onClick:o=>{o.stopPropagation();const r=`/partner/store/list?partner=${t==null?void 0:t.name}`;console.log({path:r}),x(r)},children:e("지점")})},{label:e("삭제"),width:"100px",align:"center",Cell:t=>s.jsx(l,{color:"error",variant:"contained",onClick:o=>{o.stopPropagation(),console.log(t.name),f({title:e("파트너를 삭제하시겠습니까",{str:t.name})})},children:e("삭제")})}],[p,i]);a.useEffect(()=>{d()},[i.page,i.rowsPerPage]),a.useEffect(()=>{i.onResetPage(),d()},[n.type,v]);const d=async()=>{const t=await B(n);console.log("res : ",t),T(t.membershipInfos),j(t.count),setTimeout(()=>{C(t.infos)},300)},I=a.useCallback(t=>{m.push(c.partner.details(t))},[m]);return a.useCallback((t,o)=>{S(o);let r="ALL";o===1?r="ACTIVE":o===2?r="PAUSE":o===3&&(r="INACTIVE"),u({...n,type:r})},[]),s.jsx(s.Fragment,{children:s.jsxs(W,{maxWidth:g.themeStretch?!1:"lg",children:[s.jsx(V,{heading:e("파트너관리"),links:[{name:e("파트너관리")},{name:e("파트너목록"),href:c.user.root}],action:s.jsx(l,{component:L,href:c.partner.new,variant:"contained",startIcon:s.jsx(h,{icon:"mingcute:add-line"}),style:{height:45},children:s.jsx(M,{variant:"subtitle2",children:e("파트너등록")})}),sx:{mb:{xs:3,md:5}}}),s.jsxs(z,{sx:{minWidth:850},children:[s.jsx($,{spacing:2,alignItems:{xs:"flex-end",md:"center"},justifyContent:"flex-end",direction:{xs:"column",md:"row"},sx:{p:2.5,pr:{xs:2.5,md:3}},children:s.jsx(O,{value:n.searchText,onChange:t=>u({...n,searchText:t.target.value}),placeholder:`${e("이름")} | ${e("연락처")} | ${e("지점")}`,style:{width:300},InputProps:{startAdornment:s.jsx(q,{position:"start",children:s.jsx(h,{icon:"eva:search-fill",sx:{color:"text.disabled"}})})}},"state.searchText")}),s.jsx(F,{table:i,totalElements:p,list:b,columns:y,onSelectRow:t=>{I(String(t.id))}})]})]})})}export{fe as default};
